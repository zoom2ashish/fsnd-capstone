(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{111:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},119:function(e,t,a){e.exports=a(208)},124:function(e,t,a){},125:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n,l=a(0),r=a.n(l),c=a(18),o=a.n(c),i=(a(124),a(125),a(14)),s=a(37),u=a(15),m=a(31),d=a(70),E=a(34),v=a(68),b=a(69),f=a(62),g=a(16),h=a(111),p=a.n(h);function O(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var j=function(e){var t,a=(e.data.movies||[]).map((function(e){return r.a.createElement(f.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return r.a.createElement(g.a,{className:p.a.Actor+" shadow bg-white rounded "},r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),r.a.createElement(g.a.Text,null,r.a.createElement("span",{className:"mr-2"},"Age"),r.a.createElement("span",null,e.data.age)),r.a.createElement(g.a.Text,null,r.a.createElement("span",{className:"mr-2"},"Gender"),r.a.createElement("span",null,O(e.data.gender))),r.a.createElement(g.a.Text,null,a)),r.a.createElement(g.a.Footer,null,r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},C=(a(94),a(10)),y=a(23),k=a(64),w=a.n(k),A=a(75),M=a(112),N=a.n(M).a.create({headers:{Authrization:"xxxxxx"}});N.interceptors.response.use((function(e){return e}),(function(e){e.response.status}));var F=N;function S(){return F.get("/api/movies").then((function(e){return e.data}))}var _=Object(i.g)((function(e){var t=e.data||null,a=t&&t.age||0,c=t&&t.gender||n.Unknown,o=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),i=Object(l.useState)(""),s=Object(u.a)(i,2),d=(s[0],s[1]),E=Object(l.useState)(t&&t.name||""),v=Object(u.a)(E,2),b=v[0],f=v[1],g=Object(l.useState)(a),h=Object(u.a)(g,2),p=h[0],j=h[1],k=Object(l.useState)(c),M=Object(u.a)(k,2),N=M[0],F=M[1],_=Object(l.useState)(o),T=Object(u.a)(_,2),x=T[0],D=T[1],B=Object(l.useState)(o),L=Object(u.a)(B,2),G=L[0],I=L[1];Object(l.useEffect)((function(){S().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));D(t)}))}),[]);return r.a.createElement(y.a,{show:e.show,onHide:e.onClose},r.a.createElement(w.a,{active:e.show},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),r.a.createElement(y.a.Body,null,r.a.createElement(C.a,null,r.a.createElement(C.a.Group,{controlId:"actorForm.name"},r.a.createElement(C.a.Label,null,"Actor Name"),r.a.createElement(C.a.Control,{type:"text",value:b,placeholder:"Enter Actor Name",onChange:function(e){return f(e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"actorForm.age"},r.a.createElement(C.a.Label,null,"Age"),r.a.createElement(C.a.Control,{type:"number",value:p||0,placeholder:"Enter Actor Age",onChange:function(e){return j(+e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"exampleForm.gender"},r.a.createElement(C.a.Label,null,"Gender"),r.a.createElement(C.a.Control,{as:"select",value:N,onChange:function(e){return F(e.target.value)},custom:!0},r.a.createElement("option",{value:n.Male},O(n.Male)),r.a.createElement("option",{value:n.Female},O(n.Female)),r.a.createElement("option",{value:n.Unknown},O(n.Unknown)))),r.a.createElement(C.a.Group,{controlId:"actorForm.movies"},r.a.createElement(C.a.Label,null,"Movies"),r.a.createElement(A.a,{isMulti:!0,value:G,onChange:function(e){console.log("selectedOptions=",e),I(e)},options:x})))),r.a.createElement(y.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:e.onClose},"Close"),r.a.createElement(m.a,{variant:"primary",onClick:function(){var a={name:b,age:p,gender:N,movies:(G||[]).map((function(e){return e.value}))},n=e.isEditing?"/api/actors/".concat(null===t||void 0===t?void 0:t.id):"/api/actors";fetch(n,{method:e.isEditing?"PATCH":"POST",body:JSON.stringify(a)}).then((function(){e.onClose()})).catch((function(e){d("Failed to create movie."+e.message)}))}},"Save Changes"))))}));var T={visible:!1},x=Object(i.g)((function(e){var t=Object(l.useState)(T),a=Object(u.a)(t,2),n=a[0],c=(a[1],Object(l.useState)([])),o=Object(u.a)(c,2),i=o[0],f=o[1],g=Object(l.useState)({visible:!1,isEditing:!1}),h=Object(u.a)(g,2),p=h[0],O=h[1];Object(l.useEffect)((function(){F.get("/api/actors").then((function(e){return e.data})).then((function(e){f(e.results)}))}),[p.visible]);var C=[[]];i.forEach((function(e){C[C.length-1].length>=3&&C.push([]),C[C.length-1].push(r.a.createElement(j,{key:e.id,data:e,onEdit:function(){return t=e,O(Object(s.a)(Object(s.a)({},p),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return t=e.id,void console.log("Actor Id Deleted",t);var t}},e.name))}));var y=r.a.createElement(E.a,null," No Actors Found "),k=p.visible?r.a.createElement(_,{show:p.visible,isEditing:p.isEditing,onClose:function(){O({visible:!1,isEditing:!1})},data:p.data}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{md:"auto"},r.a.createElement(m.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){O(Object(s.a)(Object(s.a)({},p),{},{visible:!0,isEditing:!1}))}},"Add Actor")),r.a.createElement(E.a,null,n.visible?r.a.createElement(b.a,{key:1,variant:n.alertType||"primary"},n.message):null)),i.length>0?C.map((function(e,t){return r.a.createElement(d.a,{key:t,className:"mt-3"},e)})):y,k)})),D=a(29),B=a(60),L=a(118),G=a(114),I=function(e){return r.a.createElement(G.a,null,r.a.createElement(B.a,{bg:"dark",variant:"dark"},r.a.createElement(B.a.Brand,{href:"#home"},"Casting Agency"),r.a.createElement(B.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(B.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"mr-auto"},r.a.createElement(D.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),r.a.createElement(D.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")))),r.a.createElement("div",{className:"container-fluid pt-4"},e.children))},H=a(90),U=a.n(H),J=function(e){var t,a=(e.data.actors||[]).map((function(e){return r.a.createElement(f.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=r.a.createElement("span",{className:[U.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return r.a.createElement(g.a,{className:U.a.Movie+" shadow bg-white rounded "},r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),r.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted"},n),r.a.createElement(g.a.Text,null,a)),r.a.createElement(g.a.Footer,null,r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},R=a(115),P=a.n(R),z=Object(i.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),c=Object(l.useState)(""),o=Object(u.a)(c,2),i=(o[0],o[1]),s=Object(l.useState)(a),d=Object(u.a)(s,2),E=d[0],v=d[1],b=Object(l.useState)(t&&t.title||""),f=Object(u.a)(b,2),g=f[0],h=f[1],p=Object(l.useState)(n),O=Object(u.a)(p,2),j=O[0],k=O[1],M=Object(l.useState)(n),N=Object(u.a)(M,2),F=N[0],S=N[1];Object(l.useEffect)((function(){fetch("/api/actors").then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));k(t)}))}),[]);return r.a.createElement(y.a,{show:e.show,onHide:e.onClose},r.a.createElement(w.a,{active:e.show},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),r.a.createElement(y.a.Body,null,r.a.createElement(C.a,null,r.a.createElement(C.a.Group,{controlId:"movieForm.title"},r.a.createElement(C.a.Label,null,"Movie Title"),r.a.createElement(C.a.Control,{type:"text",value:g,placeholder:"Enter Movie Title",onChange:function(e){return h(e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"movieForm.release_date"},r.a.createElement(C.a.Label,null,"Movie Title"),r.a.createElement(P.a,{selected:E,onChange:function(e){return v(e)}})),r.a.createElement(C.a.Group,{controlId:"movieForm.actors"},r.a.createElement(C.a.Label,null,"Actors"),r.a.createElement(A.a,{isMulti:!0,value:F,onChange:function(e){console.log("selectedOptions=",e),S(e)},options:j})),r.a.createElement(C.a.Group,{controlId:"movieForm.description"},r.a.createElement(C.a.Label,null,"Description"),r.a.createElement(C.a.Control,{as:"textarea",rows:3})))),r.a.createElement(y.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:e.onClose},"Close"),r.a.createElement(m.a,{variant:"primary",onClick:function(){var a={title:g,release_date:Math.round(E.getTime()/1e3),actors:(F||[]).map((function(e){return e.value}))},n=e.isEditing?"/api/movies/".concat(null===t||void 0===t?void 0:t.id):"/api/movies";fetch(n,{method:e.isEditing?"PATCH":"POST",body:JSON.stringify(a)}).then((function(){e.onClose()})).catch((function(e){i("Failed to create movie."+e.message)}))}},"Save Changes"))))})),W={visible:!1},Y=Object(i.g)((function(e){var t=Object(l.useState)(W),a=Object(u.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)([]),i=Object(u.a)(o,2),f=i[0],g=i[1],h=Object(l.useState)({visible:!1,isEditing:!1}),p=Object(u.a)(h,2),O=p[0],j=p[1];Object(l.useEffect)((function(){S().then((function(e){g(e.results)}))}),[O.visible]);var C=function(e){var t;(t=e.id,F.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=f.filter((function(t){return t.id!==e.id}));g(t),c({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})}))},y=[[]];f.forEach((function(e){y[y.length-1].length>=3&&y.push([]),y[y.length-1].push(r.a.createElement(J,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(s.a)(Object(s.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return C(e)}},e.title))}));var k=r.a.createElement(E.a,null," No Movies Found "),w=O.visible?r.a.createElement(z,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{md:"auto"},r.a.createElement(m.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(s.a)(Object(s.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Movie")),r.a.createElement(E.a,null,n.visible?r.a.createElement(b.a,{key:1,variant:n.alertType||"primary"},n.message):null)),f.length>0?y.map((function(e,t){return r.a.createElement(d.a,{key:t,className:"mt-3"},e)})):k,w)}));var Z=function(){var e=r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/movies",component:Y}),r.a.createElement(i.b,{exact:!0,path:"/actors",component:x}),r.a.createElement(i.a,{to:"/movies"}));return r.a.createElement(I,null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(207);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D.a,{basename:"/"},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}}},[[119,1,2]]]);
//# sourceMappingURL=main.90e30da6.chunk.js.map