(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{153:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}},156:function(e,t,a){e.exports={HomeImageContainer:"Home_HomeImageContainer__2GUUy",HomeImage:"Home_HomeImage__2-Nc_"}},233:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},240:function(e,t,a){e.exports=a.p+"static/media/home.87873b85.jpg"},242:function(e,t,a){e.exports=a(446)},247:function(e,t,a){},249:function(e,t,a){},254:function(e,t){},256:function(e,t){},266:function(e,t){},268:function(e,t){},296:function(e,t){},298:function(e,t){},299:function(e,t){},305:function(e,t){},307:function(e,t){},325:function(e,t){},328:function(e,t){},344:function(e,t){},347:function(e,t){},446:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(22),o=a.n(l),i=(a(247),a(75)),s=a.n(i),u=a(103),m=a(14),d=(a(249),a(18)),E=a(51),v=a(27),f=a(112),b=a(24),g=a(60),p=a(57),h=a(104),j=a(20),O=a(233),k=a.n(O);function w(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var C=a(43),y=a(234),A=Object(C.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.getAccessTokenSilently,l=Object(r.useState)(!1),o=Object(m.a)(l,2),i=o[0],d=o[1];return Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){var a,r,c,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:a=t.sent,(r=Object(y.decode)(a,{json:!0}))&&Array.isArray(r.permissions)||d(!1),c=(r?r.permissions:[])||[],l=e.permissions||[],o=l.every((function(e){return c.indexOf(e)>-1})),d(o);case 9:case"end":return t.stop()}}),t)})))()}),[a,n,e.permissions]),c.a.createElement(c.a.Fragment,null,i?e.children:null)})),N=function(e){var t,a=(e.data.movies||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return c.a.createElement(j.a,{className:k.a.Actor+" shadow bg-white rounded "},c.a.createElement(j.a.Body,null,c.a.createElement(j.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),c.a.createElement(j.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Age"),c.a.createElement("span",null,e.data.age)),c.a.createElement(j.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Gender"),c.a.createElement("span",null,w(e.data.gender))),c.a.createElement(j.a.Text,null,a)),c.a.createElement(j.a.Footer,null,c.a.createElement(A,{permissions:["update:actors"]},c.a.createElement(j.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(A,{permissions:["delete:actors"]},c.a.createElement(j.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},F=(a(216),a(15)),_=a(36),x=a(106),M=a.n(x),S=a(120),T=a(235),I=a.n(T).a.create({headers:{Authrization:"xxxxxx"}});I.interceptors.response.use((function(e){return e}),(function(e){throw console.log(e),e}));var D=I;function L(){return D.get("/api/movies").then((function(e){return e.data})).catch((function(e){throw console.log(e),e}))}function B(){return D.get("/api/actors").then((function(e){return e.data}))}var G=Object(d.g)((function(e){var t=e.data||null,a=t&&t.age||0,l=t&&t.gender||n.Unknown,o=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),i=Object(r.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],E=Object(r.useState)(t&&t.name||""),f=Object(m.a)(E,2),b=f[0],g=f[1],h=Object(r.useState)(a),j=Object(m.a)(h,2),O=j[0],k=j[1],C=Object(r.useState)(l),y=Object(m.a)(C,2),A=y[0],N=y[1],x=Object(r.useState)(o),T=Object(m.a)(x,2),I=T[0],B=T[1],G=Object(r.useState)(o),H=Object(m.a)(G,2),U=H[0],z=H[1];Object(r.useEffect)((function(){L().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));B(t)}))}),[]);return c.a.createElement(_.a,{show:e.show,onHide:e.onClose},c.a.createElement(M.a,{active:e.show},c.a.createElement(_.a.Header,{closeButton:!0},c.a.createElement(_.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),c.a.createElement(_.a.Body,null,u?c.a.createElement(p.a,{variant:"danger"},u):null,c.a.createElement(F.a,null,c.a.createElement(F.a.Group,{controlId:"actorForm.name"},c.a.createElement(F.a.Label,null,"Actor Name"),c.a.createElement(F.a.Control,{type:"text",value:b,placeholder:"Enter Actor Name",onChange:function(e){return g(e.target.value)}})),c.a.createElement(F.a.Group,{controlId:"actorForm.age"},c.a.createElement(F.a.Label,null,"Age"),c.a.createElement(F.a.Control,{type:"number",value:O||0,placeholder:"Enter Actor Age",onChange:function(e){return k(+e.target.value)}})),c.a.createElement(F.a.Group,{controlId:"exampleForm.gender"},c.a.createElement(F.a.Label,null,"Gender"),c.a.createElement(F.a.Control,{as:"select",value:A,onChange:function(e){return N(e.target.value)},custom:!0},c.a.createElement("option",{value:n.Male},w(n.Male)),c.a.createElement("option",{value:n.Female},w(n.Female)),c.a.createElement("option",{value:n.Unknown},w(n.Unknown)))),c.a.createElement(F.a.Group,{controlId:"actorForm.movies"},c.a.createElement(F.a.Label,null,"Movies"),c.a.createElement(S.a,{isMulti:!0,value:U,onChange:function(e){z(e)},options:I})))),c.a.createElement(_.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){var a={name:b,age:O,gender:A,movies:(U||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return D.patch("".concat("/api/actors","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)})):function(e){return D.post("/api/actors",e)}(a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)}))}},"Save Changes"))))})),H={visible:!1},U=Object(d.g)((function(e){var t=Object(r.useState)(H),a=Object(m.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)([]),i=Object(m.a)(o,2),s=i[0],u=i[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),j=h[0],O=h[1];Object(r.useEffect)((function(){B().then((function(e){u(e.results)}))}),[j.visible]);var k=function(e){var t;(t=e.id,D.delete("/api/actors"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),l({visible:!0,message:"Movie '".concat(e.name,"' deleted successfully"),alertType:"success"})})).catch((function(e){l({visible:!0,alertType:"danger",message:e.message})}))},w=[[]];s.forEach((function(e){w[w.length-1].length>=3&&w.push([]),w[w.length-1].push(c.a.createElement(N,{key:e.id,data:e,onEdit:function(){return t=e,O(Object(E.a)(Object(E.a)({},j),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return k(e)}},e.name))}));var C=c.a.createElement(b.a,null," No Actors Found "),y=j.visible?c.a.createElement(G,{show:j.visible,isEditing:j.isEditing,onClose:function(){O({visible:!1,isEditing:!1})},data:j.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,null,c.a.createElement(A,{permissions:["create:actors"]},c.a.createElement(b.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){O(Object(E.a)(Object(E.a)({},j),{},{visible:!0,isEditing:!1}))}},"Add Actor"))),c.a.createElement(b.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?w.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):C,y)})),z=a(38),R=a(93),J=a(157),W=a(125),Z=a(115),Q=function(e){var t=Object(C.b)(),a=t.user,n=t.isAuthenticated,r=t.loginWithRedirect,l=t.logout,o=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(z.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),c.a.createElement(z.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")):null,i=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a,{title:a?a.name:"Unknown",id:"collasible-nav-dropdown"},c.a.createElement(W.a.Item,{href:"/userprofile"},"View Profile"),c.a.createElement(W.a.Item,{onClick:function(){return l({returnTo:window.location.origin,client_id:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m"})}},"Logout"))):c.a.createElement(v.a,{onClick:function(){return r()},variant:"link"},"Log In");return c.a.createElement(Z.a,null,c.a.createElement(R.a,{bg:"dark",variant:"dark"},c.a.createElement(R.a.Brand,{href:"#home"},"Casting Agency"),c.a.createElement(R.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(R.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(J.a,{className:"mr-auto"},o),c.a.createElement(J.a,null,i))),c.a.createElement("div",{className:"container-fluid pt-4"},e.children))},K=a(153),X=a.n(K),Y=function(e){var t,a=(e.data.actors||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=c.a.createElement("span",{className:[X.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return c.a.createElement(j.a,{className:X.a.Movie+" shadow bg-white rounded "},c.a.createElement(j.a.Body,null,c.a.createElement(j.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),c.a.createElement(j.a.Subtitle,{className:"mb-2 text-muted"},n),c.a.createElement(j.a.Text,null,a)),c.a.createElement(j.a.Footer,null,c.a.createElement(A,{permissions:["update:movies"]},c.a.createElement(j.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(A,{permissions:["delete:movies"]},c.a.createElement(j.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},P=a(237),V=a.n(P),$=Object(d.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),l=Object(r.useState)(""),o=Object(m.a)(l,2),i=o[0],s=o[1],u=Object(r.useState)(a),d=Object(m.a)(u,2),E=d[0],f=d[1],b=Object(r.useState)(t&&t.title||""),g=Object(m.a)(b,2),h=g[0],j=g[1],O=Object(r.useState)(n),k=Object(m.a)(O,2),w=k[0],C=k[1],y=Object(r.useState)(n),A=Object(m.a)(y,2),N=A[0],x=A[1];Object(r.useEffect)((function(){B().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));C(t)}))}),[]);return c.a.createElement(_.a,{show:e.show,onHide:e.onClose},c.a.createElement(M.a,{active:e.show},c.a.createElement(_.a.Header,{closeButton:!0},c.a.createElement(_.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),c.a.createElement(_.a.Body,null,i?c.a.createElement(p.a,{variant:"danger"},i):null,c.a.createElement(F.a,null,c.a.createElement(F.a.Group,{controlId:"movieForm.title"},c.a.createElement(F.a.Label,null,"Movie Title"),c.a.createElement(F.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return j(e.target.value)}})),c.a.createElement(F.a.Group,{controlId:"movieForm.release_date"},c.a.createElement(F.a.Label,null,"Movie Title"),c.a.createElement(V.a,{selected:E,onChange:function(e){return f(e)}})),c.a.createElement(F.a.Group,{controlId:"movieForm.actors"},c.a.createElement(F.a.Label,null,"Actors"),c.a.createElement(S.a,{isMulti:!0,value:N,onChange:function(e){x(e)},options:w})),c.a.createElement(F.a.Group,{controlId:"movieForm.description"},c.a.createElement(F.a.Label,null,"Description"),c.a.createElement(F.a.Control,{as:"textarea",rows:3})))),c.a.createElement(_.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){s("");var a={title:h,release_date:Math.round(E.getTime()/1e3),actors:(N||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return D.patch("".concat("/api/movies","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)})):function(e){return D.post("/api/movies",e)}(a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)}))}},"Save Changes"))))})),q={visible:!1},ee=Object(d.g)((function(e){var t=Object(r.useState)(q),a=Object(m.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)([]),i=Object(m.a)(o,2),s=i[0],u=i[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),j=h[0],O=h[1];Object(r.useEffect)((function(){L().then((function(e){u(e.results)}))}),[j.visible]);var k=function(e){var t;(t=e.id,D.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),l({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})})).catch((function(e){l({visible:!0,alertType:"danger",message:e.message})}))},w=[[]];s.forEach((function(e){w[w.length-1].length>=3&&w.push([]),w[w.length-1].push(c.a.createElement(Y,{key:e.id,data:e,onEdit:function(){return t=e,O(Object(E.a)(Object(E.a)({},j),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return k(e)}},e.title))}));var C=c.a.createElement(b.a,null," No Movies Found "),y=j.visible?c.a.createElement($,{show:j.visible,isEditing:j.isEditing,onClose:function(){O({visible:!1,isEditing:!1})},data:j.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,null,c.a.createElement(A,{permissions:["create:movies"]},c.a.createElement(b.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){O(Object(E.a)(Object(E.a)({},j),{},{visible:!0,isEditing:!1}))}},"Add Movie"))),c.a.createElement(b.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?w.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):C,y)})),te=a(240),ae=a.n(te),ne=a(241),re=a(156),ce=a.n(re),le=function(e){return c.a.createElement("div",{className:ce.a.HomeImageContainer},c.a.createElement(ne.a,{className:ce.a.HomeImage,src:ae.a,rounded:!0}))},oe=Object(d.g)(Object(C.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.user,r=null;return a&&n&&(r=c.a.createElement(Z.a,null,c.a.createElement(g.a,null,c.a.createElement(b.a,{sm:3,md:2},"Name"),c.a.createElement(b.a,null,n.name)),c.a.createElement(g.a,{className:"mt-3"},c.a.createElement(b.a,{sm:3,md:2},"Email"),c.a.createElement(b.a,null,n.email||"Not Set")),c.a.createElement(g.a,{className:"mt-3"},c.a.createElement(b.a,{sm:3,md:2},"Nickname"),c.a.createElement(b.a,null,n.nickname||"Not Set")))),c.a.createElement(c.a.Fragment,null,r)})));var ie=function(){var e=Object(C.b)(),t=e.isAuthenticated,a=e.getAccessTokenSilently,n=Object(r.useState)(""),l=Object(m.a)(n,2),o=l[0],i=l[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,a();case 3:n=e.sent,D.defaults.headers.common.Authorization="Bearer "+n,i(n);case 6:case"end":return e.stop()}}),e)})))()}),[t,a]);var E=t&&o?c.a.createElement(c.a.Fragment,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/movies",component:ee}),c.a.createElement(d.b,{exact:!0,path:"/actors",component:U}),c.a.createElement(d.b,{exact:!0,path:"/userprofile",component:oe}),c.a.createElement(d.a,{to:"/movies"}))):c.a.createElement(le,null);return c.a.createElement(Q,null,E)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(445);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C.a,{domain:"ashishp-dev.us.auth0.com",clientId:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m",audience:"casting-agency-api",redirectUri:window.location.origin},c.a.createElement(z.a,{basename:"/"},c.a.createElement(ie,null)," "))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[242,1,2]]]);
//# sourceMappingURL=main.429c0ed9.chunk.js.map