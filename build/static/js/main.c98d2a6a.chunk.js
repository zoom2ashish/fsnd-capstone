(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{154:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}},233:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},240:function(e,t,a){e.exports=a(444)},245:function(e,t,a){},247:function(e,t,a){},252:function(e,t){},254:function(e,t){},264:function(e,t){},266:function(e,t){},294:function(e,t){},296:function(e,t){},297:function(e,t){},303:function(e,t){},305:function(e,t){},323:function(e,t){},326:function(e,t){},342:function(e,t){},345:function(e,t){},444:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(22),i=a.n(l),o=(a(245),a(76)),s=a.n(o),u=a(104),m=a(14),d=(a(247),a(18)),E=a(51),v=a(26),f=a(113),g=a(24),b=a(60),p=a(57),h=a(105),O=a(20),j=a(233),y=a.n(j);function C(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var _=a(34),k=a(234),w=Object(_.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.getAccessTokenSilently,l=Object(r.useState)(!1),i=Object(m.a)(l,2),o=i[0],d=i[1];return Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){var a,r,c,l,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:a=t.sent,(r=Object(k.decode)(a,{json:!0}))&&Array.isArray(r.permissions)||d(!1),c=(r?r.permissions:[])||[],l=e.permissions||[],i=l.every((function(e){return c.indexOf(e)>-1})),d(i);case 9:case"end":return t.stop()}}),t)})))()}),[a,n,e.permissions]),c.a.createElement(c.a.Fragment,null,o?e.children:null)})),A=function(e){var t,a=(e.data.movies||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return c.a.createElement(O.a,{className:y.a.Actor+" shadow bg-white rounded "},c.a.createElement(O.a.Body,null,c.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),c.a.createElement(O.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Age"),c.a.createElement("span",null,e.data.age)),c.a.createElement(O.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Gender"),c.a.createElement("span",null,C(e.data.gender))),c.a.createElement(O.a.Text,null,a)),c.a.createElement(O.a.Footer,null,c.a.createElement(w,{permissions:["update:actors"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(w,{permissions:["delete:actors"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},N=(a(216),a(15)),F=a(37),M=a(107),x=a.n(M),S=a(121),H=a(235),I=a.n(H).a.create({headers:{Authrization:"xxxxxx"}});I.interceptors.response.use((function(e){return e}),(function(e){throw console.log(e),e}));var T=I;function L(){return T.get("/api/movies").then((function(e){return e.data})).catch((function(e){throw console.log(e),e}))}function B(){return T.get("/api/actors").then((function(e){return e.data}))}var D=Object(d.g)((function(e){var t=e.data||null,a=t&&t.age||0,l=t&&t.gender||n.Unknown,i=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),o=Object(r.useState)(""),s=Object(m.a)(o,2),u=s[0],d=s[1],E=Object(r.useState)(t&&t.name||""),f=Object(m.a)(E,2),g=f[0],b=f[1],h=Object(r.useState)(a),O=Object(m.a)(h,2),j=O[0],y=O[1],_=Object(r.useState)(l),k=Object(m.a)(_,2),w=k[0],A=k[1],M=Object(r.useState)(i),H=Object(m.a)(M,2),I=H[0],B=H[1],D=Object(r.useState)(i),G=Object(m.a)(D,2),P=G[0],U=G[1];Object(r.useEffect)((function(){L().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));B(t)}))}),[]);return c.a.createElement(F.a,{show:e.show,onHide:e.onClose},c.a.createElement(x.a,{active:e.show},c.a.createElement(F.a.Header,{closeButton:!0},c.a.createElement(F.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),c.a.createElement(F.a.Body,null,u?c.a.createElement(p.a,{variant:"danger"},u):null,c.a.createElement(N.a,null,c.a.createElement(N.a.Group,{controlId:"actorForm.name"},c.a.createElement(N.a.Label,null,"Actor Name"),c.a.createElement(N.a.Control,{type:"text",value:g,placeholder:"Enter Actor Name",onChange:function(e){return b(e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"actorForm.age"},c.a.createElement(N.a.Label,null,"Age"),c.a.createElement(N.a.Control,{type:"number",value:j||0,placeholder:"Enter Actor Age",onChange:function(e){return y(+e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"exampleForm.gender"},c.a.createElement(N.a.Label,null,"Gender"),c.a.createElement(N.a.Control,{as:"select",value:w,onChange:function(e){return A(e.target.value)},custom:!0},c.a.createElement("option",{value:n.Male},C(n.Male)),c.a.createElement("option",{value:n.Female},C(n.Female)),c.a.createElement("option",{value:n.Unknown},C(n.Unknown)))),c.a.createElement(N.a.Group,{controlId:"actorForm.movies"},c.a.createElement(N.a.Label,null,"Movies"),c.a.createElement(S.a,{isMulti:!0,value:P,onChange:function(e){U(e)},options:I})))),c.a.createElement(F.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){var a={name:g,age:j,gender:w,movies:(P||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return T.patch("".concat("/api/actors","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)})):function(e){return T.post("/api/actors",e)}(a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)}))}},"Save Changes"))))})),G={visible:!1},P=Object(d.g)((function(e){var t=Object(r.useState)(G),a=Object(m.a)(t,2),n=a[0],l=a[1],i=Object(r.useState)([]),o=Object(m.a)(i,2),s=o[0],u=o[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),O=h[0],j=h[1];Object(r.useEffect)((function(){B().then((function(e){u(e.results)}))}),[O.visible]);var y=function(e){var t;(t=e.id,T.delete("/api/actors"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),l({visible:!0,message:"Movie '".concat(e.name,"' deleted successfully"),alertType:"success"})})).catch((function(e){l({visible:!0,alertType:"danger",message:e.message})}))},C=[[]];s.forEach((function(e){C[C.length-1].length>=3&&C.push([]),C[C.length-1].push(c.a.createElement(A,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return y(e)}},e.name))}));var _=c.a.createElement(g.a,null," No Actors Found "),k=O.visible?c.a.createElement(D,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,c.a.createElement(w,{permissions:["create:actors"]},c.a.createElement(g.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Actor"))),c.a.createElement(g.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?C.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):_,k)})),U=a(39),R=a(94),z=a(157),W=a(126),X=a(116),J=Object(d.g)((function(e){var t=Object(_.b)(),a=t.user,n=t.isAuthenticated,r=t.loginWithRedirect,l=t.logout,i=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(U.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),c.a.createElement(U.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")):null,o=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a,{title:a?a.name:"Unknown",id:"collasible-nav-dropdown"},c.a.createElement(W.a.Item,{onClick:function(){e.history.push("/userprofile")}},"View Profile"),c.a.createElement(W.a.Item,{onClick:function(){return l({returnTo:window.location.origin,client_id:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m"})}},"Logout"))):c.a.createElement(v.a,{onClick:function(){return r()},variant:"dark"},"Log In");return c.a.createElement(X.a,{fluid:!0},c.a.createElement(R.a,{bg:"dark",variant:"dark"},c.a.createElement(R.a.Brand,{href:"#home"},"Casting Agency"),c.a.createElement(R.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(R.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(z.a,{className:"mr-auto"},i),c.a.createElement(z.a,null,o))),c.a.createElement("div",{className:"container-fluid pt-4"},e.children))})),Z=a(154),Q=a.n(Z),Y=function(e){var t,a=(e.data.actors||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=c.a.createElement("span",{className:[Q.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return c.a.createElement(O.a,{className:Q.a.Movie+" shadow bg-white rounded "},c.a.createElement(O.a.Body,null,c.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),c.a.createElement(O.a.Subtitle,{className:"mb-2 text-muted"},n),c.a.createElement(O.a.Text,null,a)),c.a.createElement(O.a.Footer,null,c.a.createElement(w,{permissions:["update:movies"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(w,{permissions:["delete:movies"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},K=a(237),V=a.n(K),$=Object(d.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),l=Object(r.useState)(""),i=Object(m.a)(l,2),o=i[0],s=i[1],u=Object(r.useState)(a),d=Object(m.a)(u,2),E=d[0],f=d[1],g=Object(r.useState)(t&&t.title||""),b=Object(m.a)(g,2),h=b[0],O=b[1],j=Object(r.useState)(n),y=Object(m.a)(j,2),C=y[0],_=y[1],k=Object(r.useState)(n),w=Object(m.a)(k,2),A=w[0],M=w[1];Object(r.useEffect)((function(){B().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));_(t)}))}),[]);return c.a.createElement(F.a,{show:e.show,onHide:e.onClose},c.a.createElement(x.a,{active:e.show},c.a.createElement(F.a.Header,{closeButton:!0},c.a.createElement(F.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),c.a.createElement(F.a.Body,null,o?c.a.createElement(p.a,{variant:"danger"},o):null,c.a.createElement(N.a,null,c.a.createElement(N.a.Group,{controlId:"movieForm.title"},c.a.createElement(N.a.Label,null,"Movie Title"),c.a.createElement(N.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return O(e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"movieForm.release_date"},c.a.createElement(N.a.Label,null,"Movie Title"),c.a.createElement(V.a,{selected:E,onChange:function(e){return f(e)}})),c.a.createElement(N.a.Group,{controlId:"movieForm.actors"},c.a.createElement(N.a.Label,null,"Actors"),c.a.createElement(S.a,{isMulti:!0,value:A,onChange:function(e){M(e)},options:C})),c.a.createElement(N.a.Group,{controlId:"movieForm.description"},c.a.createElement(N.a.Label,null,"Description"),c.a.createElement(N.a.Control,{as:"textarea",rows:3})))),c.a.createElement(F.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){s("");var a={title:h,release_date:Math.round(E.getTime()/1e3),actors:(A||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return T.patch("".concat("/api/movies","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)})):function(e){return T.post("/api/movies",e)}(a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)}))}},"Save Changes"))))})),q={visible:!1},ee=Object(d.g)((function(e){var t=Object(r.useState)(q),a=Object(m.a)(t,2),n=a[0],l=a[1],i=Object(r.useState)([]),o=Object(m.a)(i,2),s=o[0],u=o[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),O=h[0],j=h[1];Object(r.useEffect)((function(){L().then((function(e){u(e.results)}))}),[O.visible]);var y=function(e){var t;(t=e.id,T.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),l({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})})).catch((function(e){l({visible:!0,alertType:"danger",message:e.message})}))},C=[[]];s.forEach((function(e){C[C.length-1].length>=3&&C.push([]),C[C.length-1].push(c.a.createElement(Y,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return y(e)}},e.title))}));var _=c.a.createElement(g.a,null," No Movies Found "),k=O.visible?c.a.createElement($,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,c.a.createElement(w,{permissions:["create:movies"]},c.a.createElement(g.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Movie"))),c.a.createElement(g.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?C.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):_,k)})),te=a(66),ae=a.n(te),ne=function(e){var t=Object(_.b)().loginWithRedirect;return c.a.createElement("div",{className:ae.a.HomeImageContainer},c.a.createElement("div",{className:ae.a.headerTextContainer},c.a.createElement("h1",{className:ae.a.HeadingPrimary},c.a.createElement("span",{className:ae.a.HeadingPrimaryMain},"Casting Agency"),c.a.createElement("span",{className:ae.a.HeadingPrimarySub},"Way to path forward")),c.a.createElement(v.a,{variant:"light",className:ae.a.LoginButton,onClick:function(){return t()}},"Login")))},re=Object(d.g)(Object(_.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.user,r=null;return a&&n&&(r=c.a.createElement(X.a,null,c.a.createElement(b.a,null,c.a.createElement(g.a,{sm:3,md:2},"Name"),c.a.createElement(g.a,null,n.name)),c.a.createElement(b.a,{className:"mt-3"},c.a.createElement(g.a,{sm:3,md:2},"Email"),c.a.createElement(g.a,null,n.email||"Not Set")),c.a.createElement(b.a,{className:"mt-3"},c.a.createElement(g.a,{sm:3,md:2},"Nickname"),c.a.createElement(g.a,null,n.nickname||"Not Set")))),c.a.createElement(c.a.Fragment,null,r)})));var ce=function(){var e=Object(_.b)(),t=e.isAuthenticated,a=e.getAccessTokenSilently,n=Object(r.useState)(""),l=Object(m.a)(n,2),i=l[0],o=l[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,a();case 3:n=e.sent,T.defaults.headers.common.Authorization="Bearer "+n,o(n);case 6:case"end":return e.stop()}}),e)})))()}),[t,a]);var E=t&&i?c.a.createElement(c.a.Fragment,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/movies",component:ee}),c.a.createElement(d.b,{exact:!0,path:"/actors",component:P}),c.a.createElement(d.b,{exact:!0,path:"/userprofile",component:re}),c.a.createElement(d.a,{to:"/movies"}))):c.a.createElement(ne,null);return c.a.createElement(J,null,E)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(443);i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(_.a,{domain:"ashishp-dev.us.auth0.com",clientId:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m",audience:"casting-agency-api",redirectUri:window.location.origin},c.a.createElement(U.a,{basename:"/"},c.a.createElement(ce,null)," "))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports={HomeImageContainer:"Home_HomeImageContainer__2GUUy",HomeImage:"Home_HomeImage__2-Nc_",headerTextContainer:"Home_headerTextContainer__3-LMo",HeadingPrimary:"Home_HeadingPrimary__2PFIO",HeadingPrimaryMain:"Home_HeadingPrimaryMain__2uzX4",moveInLeft:"Home_moveInLeft__1gXYo",HeadingPrimarySub:"Home_HeadingPrimarySub__1bCi0",moveInRight:"Home_moveInRight__1X4v-",LoginButton:"Home_LoginButton__14-XO"}}},[[240,1,2]]]);
//# sourceMappingURL=main.c98d2a6a.chunk.js.map