(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{155:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}},234:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},238:function(e,t,a){e.exports={Layout:"Layout_Layout__37MHr"}},243:function(e,t,a){e.exports=a(450)},248:function(e,t,a){},250:function(e,t,a){},255:function(e,t){},257:function(e,t){},267:function(e,t){},269:function(e,t){},297:function(e,t){},299:function(e,t){},300:function(e,t){},306:function(e,t){},308:function(e,t){},326:function(e,t){},329:function(e,t){},345:function(e,t){},348:function(e,t){},450:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(23),l=a.n(o),i=(a(248),a(56)),s=a.n(i),u=a(72),m=a(14),d=(a(250),a(18)),E=a(52),v=a(26),f=a(114),g=a(20),b=a(57),p=a(45),h=a(106),O=a(21),j=a(234),y=a.n(j);function _(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var C=a(34),k=a(235),w=Object(C.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.getAccessTokenSilently,o=Object(r.useState)(!1),l=Object(m.a)(o,2),i=l[0],d=l[1];return Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){var a,r,c,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:a=t.sent,(r=Object(k.decode)(a,{json:!0}))&&Array.isArray(r.permissions)||d(!1),c=(r?r.permissions:[])||[],o=e.permissions||[],l=o.every((function(e){return c.indexOf(e)>-1})),d(l);case 9:case"end":return t.stop()}}),t)})))()}),[a,n,e.permissions]),c.a.createElement(c.a.Fragment,null,i?e.children:null)})),A=function(e){var t,a=(e.data.movies||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return c.a.createElement(O.a,{className:y.a.Actor+" shadow bg-white rounded "},c.a.createElement(O.a.Body,null,c.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),c.a.createElement(O.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Age"),c.a.createElement("span",null,e.data.age)),c.a.createElement(O.a.Text,null,c.a.createElement("span",{className:"mr-2"},"Gender"),c.a.createElement("span",null,_(e.data.gender))),c.a.createElement(O.a.Text,null,a)),c.a.createElement(O.a.Footer,null,c.a.createElement(w,{permissions:["update:actors"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(w,{permissions:["delete:actors"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},N=(a(217),a(15)),x=a(37),T=a(108),F=a.n(T),M=a(122),S=a(236),H=a.n(S).a.create({headers:{Authrization:"xxxxxx"}});H.interceptors.response.use((function(e){return e}),(function(e){throw console.log(e),e}));var I=H;function L(){return I.get("/api/movies").then((function(e){return e.data})).catch((function(e){throw console.log(e),e}))}function D(){return I.get("/api/actors").then((function(e){return e.data}))}var B=Object(d.g)((function(e){var t=e.data||null,a=t&&t.age||0,o=t&&t.gender||n.Unknown,l=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),i=Object(r.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],E=Object(r.useState)(t&&t.name||""),f=Object(m.a)(E,2),g=f[0],b=f[1],h=Object(r.useState)(a),O=Object(m.a)(h,2),j=O[0],y=O[1],C=Object(r.useState)(o),k=Object(m.a)(C,2),w=k[0],A=k[1],T=Object(r.useState)(l),S=Object(m.a)(T,2),H=S[0],D=S[1],B=Object(r.useState)(l),G=Object(m.a)(B,2),P=G[0],U=G[1];Object(r.useEffect)((function(){L().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));D(t)}))}),[]);return c.a.createElement(x.a,{show:e.show,onHide:e.onClose},c.a.createElement(F.a,{active:e.show},c.a.createElement(x.a.Header,{closeButton:!0},c.a.createElement(x.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),c.a.createElement(x.a.Body,null,u?c.a.createElement(p.a,{variant:"danger"},u):null,c.a.createElement(N.a,null,c.a.createElement(N.a.Group,{controlId:"actorForm.name"},c.a.createElement(N.a.Label,null,"Actor Name"),c.a.createElement(N.a.Control,{type:"text",value:g,placeholder:"Enter Actor Name",onChange:function(e){return b(e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"actorForm.age"},c.a.createElement(N.a.Label,null,"Age"),c.a.createElement(N.a.Control,{type:"number",value:j||0,placeholder:"Enter Actor Age",onChange:function(e){return y(+e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"exampleForm.gender"},c.a.createElement(N.a.Label,null,"Gender"),c.a.createElement(N.a.Control,{as:"select",value:w,onChange:function(e){return A(e.target.value)},custom:!0},c.a.createElement("option",{value:n.Male},_(n.Male)),c.a.createElement("option",{value:n.Female},_(n.Female)),c.a.createElement("option",{value:n.Unknown},_(n.Unknown)))),c.a.createElement(N.a.Group,{controlId:"actorForm.movies"},c.a.createElement(N.a.Label,null,"Movies"),c.a.createElement(M.a,{isMulti:!0,value:P,onChange:function(e){U(e)},options:H})))),c.a.createElement(x.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){var a={name:g,age:j,gender:w,movies:(P||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return I.patch("".concat("/api/actors","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)})):function(e){return I.post("/api/actors",e)}(a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)}))}},"Save Changes"))))})),G={visible:!1},P=Object(d.g)((function(e){var t=Object(r.useState)(G),a=Object(m.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),i=Object(m.a)(l,2),s=i[0],u=i[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),O=h[0],j=h[1];Object(r.useEffect)((function(){D().then((function(e){u(e.results)}))}),[O.visible]);var y=function(e){var t;(t=e.id,I.delete("/api/actors"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),o({visible:!0,message:"Movie '".concat(e.name,"' deleted successfully"),alertType:"success"})})).catch((function(e){o({visible:!0,alertType:"danger",message:e.message})}))},_=[[]];s.forEach((function(e){_[_.length-1].length>=3&&_.push([]),_[_.length-1].push(c.a.createElement(A,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return y(e)}},e.name))}));var C=c.a.createElement(g.a,null," No Actors Found "),k=O.visible?c.a.createElement(B,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,c.a.createElement(w,{permissions:["create:actors"]},c.a.createElement(g.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Actor"))),c.a.createElement(g.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?_.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):C,k)})),U=a(39),R=a(96),W=a(158),z=a(127),J=a(117),X=a(238),Z=a.n(X),Q=Object(d.g)((function(e){var t=Object(C.b)(),a=t.user,n=t.isAuthenticated,r=t.loginWithRedirect,o=t.logout,l=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(U.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),c.a.createElement(U.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")):null,i=n?c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{title:a?a.name:"Unknown",id:"collasible-nav-dropdown"},c.a.createElement(z.a.Item,{onClick:function(){e.history.push("/userprofile")}},"View Profile"),c.a.createElement(z.a.Item,{onClick:function(){return o({returnTo:window.location.origin,client_id:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m"})}},"Logout"))):c.a.createElement(v.a,{onClick:function(){return r()},variant:"dark"},"Log In");return c.a.createElement(J.a,{className:Z.a.Layout+" shadow"},c.a.createElement(R.a,{bg:"dark",variant:"dark"},c.a.createElement(R.a.Brand,{href:"#home"},"Casting Agency"),c.a.createElement(R.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(R.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(W.a,{className:"mr-auto"},l),c.a.createElement(W.a,null,i))),c.a.createElement("div",{className:"container-fluid pt-4"},e.children))})),Y=a(155),K=a.n(Y),V=function(e){var t,a=(e.data.actors||[]).map((function(e){return c.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=c.a.createElement("span",{className:[K.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return c.a.createElement(O.a,{className:K.a.Movie+" shadow bg-white rounded "},c.a.createElement(O.a.Body,null,c.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),c.a.createElement(O.a.Subtitle,{className:"mb-2 text-muted"},n),c.a.createElement(O.a.Text,null,a)),c.a.createElement(O.a.Footer,null,c.a.createElement(w,{permissions:["update:movies"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit")),c.a.createElement(w,{permissions:["delete:movies"]},c.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete"))))},$=a(239),q=a.n($),ee=Object(d.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),o=Object(r.useState)(""),l=Object(m.a)(o,2),i=l[0],s=l[1],u=Object(r.useState)(a),d=Object(m.a)(u,2),E=d[0],f=d[1],g=Object(r.useState)(t&&t.title||""),b=Object(m.a)(g,2),h=b[0],O=b[1],j=Object(r.useState)(n),y=Object(m.a)(j,2),_=y[0],C=y[1],k=Object(r.useState)(n),w=Object(m.a)(k,2),A=w[0],T=w[1];Object(r.useEffect)((function(){D().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));C(t)}))}),[]);return c.a.createElement(x.a,{show:e.show,onHide:e.onClose},c.a.createElement(F.a,{active:e.show},c.a.createElement(x.a.Header,{closeButton:!0},c.a.createElement(x.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),c.a.createElement(x.a.Body,null,i?c.a.createElement(p.a,{variant:"danger"},i):null,c.a.createElement(N.a,null,c.a.createElement(N.a.Group,{controlId:"movieForm.title"},c.a.createElement(N.a.Label,null,"Movie Title"),c.a.createElement(N.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return O(e.target.value)}})),c.a.createElement(N.a.Group,{controlId:"movieForm.release_date"},c.a.createElement(N.a.Label,null,"Movie Title"),c.a.createElement(q.a,{selected:E,onChange:function(e){return f(e)}})),c.a.createElement(N.a.Group,{controlId:"movieForm.actors"},c.a.createElement(N.a.Label,null,"Actors"),c.a.createElement(M.a,{isMulti:!0,value:A,onChange:function(e){T(e)},options:_})),c.a.createElement(N.a.Group,{controlId:"movieForm.description"},c.a.createElement(N.a.Label,null,"Description"),c.a.createElement(N.a.Control,{as:"textarea",rows:3})))),c.a.createElement(x.a.Footer,null,c.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),c.a.createElement(v.a,{variant:"primary",onClick:function(){s("");var a={title:h,release_date:Math.round(E.getTime()/1e3),actors:(A||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return I.patch("".concat("/api/movies","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)})):function(e){return I.post("/api/movies",e)}(a).then((function(){e.onClose()})).catch((function(e){s("Failed to update movie."+e.message)}))}},"Save Changes"))))})),te={visible:!1},ae=Object(d.g)((function(e){var t=Object(r.useState)(te),a=Object(m.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),i=Object(m.a)(l,2),s=i[0],u=i[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),O=h[0],j=h[1];Object(r.useEffect)((function(){L().then((function(e){u(e.results)}))}),[O.visible]);var y=function(e){var t;(t=e.id,I.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=s.filter((function(t){return t.id!==e.id}));u(t),o({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})})).catch((function(e){o({visible:!0,alertType:"danger",message:e.message})}))},_=[[]];s.forEach((function(e){_[_.length-1].length>=3&&_.push([]),_[_.length-1].push(c.a.createElement(V,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return y(e)}},e.title))}));var C=c.a.createElement(g.a,null," No Movies Found "),k=O.visible?c.a.createElement(ee,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,c.a.createElement(w,{permissions:["create:movies"]},c.a.createElement(g.a,{md:"auto"},c.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Movie"))),c.a.createElement(g.a,null,n.visible?c.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),s.length>0?_.map((function(e,t){return c.a.createElement(f.a,{key:t,className:"mt-3"},e)})):C,k)})),ne=a(67),re=a.n(ne),ce=function(e){var t=Object(C.b)().loginWithRedirect;return c.a.createElement("div",{className:re.a.HomeImageContainer},c.a.createElement("div",{className:re.a.headerTextContainer},c.a.createElement("h1",{className:re.a.HeadingPrimary},c.a.createElement("span",{className:re.a.HeadingPrimaryMain},"Casting Agency"),c.a.createElement("span",{className:re.a.HeadingPrimarySub},"Way to path forward")),c.a.createElement(v.a,{variant:"light",className:re.a.LoginButton,onClick:function(){return t()}},"Login")))},oe=a(95),le=a.n(oe),ie=a(242),se=a.n(ie),ue=a(460),me=Object(d.g)(Object(C.c)((function(e){var t=e.auth0,a=t.isAuthenticated,n=t.user,o=t.getAccessTokenSilently,l=Object(r.useState)(""),i=Object(m.a)(l,2),d=i[0],E=i[1],v=Object(r.useState)(!1),f=Object(m.a)(v,2),h=f[0],O=f[1],j=0;Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,o();case 3:t=e.sent,E(t);case 5:case"end":return e.stop()}}),e)})))()}),[a,o]);var y=null;return a&&n&&(y=c.a.createElement(J.a,null,c.a.createElement(b.a,null,c.a.createElement(g.a,{sm:3,md:2},"Name"),c.a.createElement(g.a,null,n.name)),c.a.createElement(b.a,{className:"mt-3"},c.a.createElement(g.a,{sm:3,md:2},"Email"),c.a.createElement(g.a,null,n.email||"Not Set")),c.a.createElement(b.a,{className:"mt-3"},c.a.createElement(g.a,{sm:3,md:2},"Nickname"),c.a.createElement(g.a,null,n.nickname||"Not Set")),c.a.createElement(b.a,{className:"mt-3"},c.a.createElement(g.a,{sm:3,md:2},"JWT Token"),c.a.createElement(g.a,null,c.a.createElement("div",{className:le.a.Token},d),c.a.createElement("div",{className:le.a.copyAction},c.a.createElement(se.a,{text:d,onCopy:function(){return clearTimeout(j),O(!0),void(j=setTimeout((function(){O(!1),clearTimeout(j)}),3e3))}},c.a.createElement(ue.a,{className:le.a.copyIcon,size:24,color:h?"green":"blue"})),h?c.a.createElement(p.a,{className:le.a.copiedAlert,variant:"success"},"Copied To Clipboard"):null))))),c.a.createElement(c.a.Fragment,null,y)})));var de=function(){var e=Object(C.b)(),t=e.isAuthenticated,a=e.getAccessTokenSilently,n=Object(r.useState)(""),o=Object(m.a)(n,2),l=o[0],i=o[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,a();case 3:n=e.sent,I.defaults.headers.common.Authorization="Bearer "+n,i(n);case 6:case"end":return e.stop()}}),e)})))()}),[t,a]);var E=t&&l?c.a.createElement(c.a.Fragment,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/movies",component:ae}),c.a.createElement(d.b,{exact:!0,path:"/actors",component:P}),c.a.createElement(d.b,{exact:!0,path:"/userprofile",component:me}),c.a.createElement(d.a,{to:"/movies"}))):c.a.createElement(ce,null);return c.a.createElement(Q,null,E)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(449);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C.a,{domain:"ashishp-dev.us.auth0.com",clientId:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m",audience:"casting-agency-api",redirectUri:window.location.origin},c.a.createElement(U.a,{basename:"/"},c.a.createElement(de,null)," "))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports={HomeImageContainer:"Home_HomeImageContainer__2GUUy",HomeImage:"Home_HomeImage__2-Nc_",headerTextContainer:"Home_headerTextContainer__3-LMo",HeadingPrimary:"Home_HeadingPrimary__2PFIO",HeadingPrimaryMain:"Home_HeadingPrimaryMain__2uzX4",moveInLeft:"Home_moveInLeft__1gXYo",HeadingPrimarySub:"Home_HeadingPrimarySub__1bCi0",moveInRight:"Home_moveInRight__1X4v-",LoginButton:"Home_LoginButton__14-XO"}},95:function(e,t,a){e.exports={Token:"UserProfile_Token__3s79D",copyAction:"UserProfile_copyAction__2GDpQ",copyIcon:"UserProfile_copyIcon__tZWJD"}}},[[243,1,2]]]);
//# sourceMappingURL=main.f82a9acf.chunk.js.map