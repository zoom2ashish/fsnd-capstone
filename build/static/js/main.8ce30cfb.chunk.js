(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{117:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},124:function(e,t,a){e.exports=a.p+"static/media/home.87873b85.jpg"},126:function(e,t,a){e.exports=a(217)},131:function(e,t,a){},133:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(18),o=a.n(c),i=(a(131),a(89)),u=a.n(i),s=a(116),m=a(12),d=(a(133),a(15)),E=a(37),v=a(21),f=a(71),g=a(34),b=a(70),p=a(41),h=a(64),O=a(16),j=a(117),C=a.n(j);function k(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var w=function(e){var t,a=(e.data.movies||[]).map((function(e){return l.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return l.a.createElement(O.a,{className:C.a.Actor+" shadow bg-white rounded "},l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),l.a.createElement(O.a.Text,null,l.a.createElement("span",{className:"mr-2"},"Age"),l.a.createElement("span",null,e.data.age)),l.a.createElement(O.a.Text,null,l.a.createElement("span",{className:"mr-2"},"Gender"),l.a.createElement("span",null,k(e.data.gender))),l.a.createElement(O.a.Text,null,a)),l.a.createElement(O.a.Footer,null,l.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),l.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},y=(a(98),a(10)),A=a(24),_=a(66),F=a.n(_),M=a(76),N=a(118),x=a.n(N).a.create({headers:{Authrization:"xxxxxx"}});x.interceptors.response.use((function(e){return e}),(function(e){throw console.log(e),e}));var S=x;function I(){return S.get("/api/movies").then((function(e){return e.data})).catch((function(e){throw console.log(e),e}))}function T(){return S.get("/api/actors").then((function(e){return e.data}))}var D=Object(d.g)((function(e){var t=e.data||null,a=t&&t.age||0,c=t&&t.gender||n.Unknown,o=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),i=Object(r.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1],E=Object(r.useState)(t&&t.name||""),f=Object(m.a)(E,2),g=f[0],b=f[1],h=Object(r.useState)(a),O=Object(m.a)(h,2),j=O[0],C=O[1],w=Object(r.useState)(c),_=Object(m.a)(w,2),N=_[0],x=_[1],T=Object(r.useState)(o),D=Object(m.a)(T,2),L=D[0],B=D[1],G=Object(r.useState)(o),H=Object(m.a)(G,2),U=H[0],z=H[1];Object(r.useEffect)((function(){I().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));B(t)}))}),[]);return l.a.createElement(A.a,{show:e.show,onHide:e.onClose},l.a.createElement(F.a,{active:e.show},l.a.createElement(A.a.Header,{closeButton:!0},l.a.createElement(A.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),l.a.createElement(A.a.Body,null,s?l.a.createElement(p.a,{variant:"danger"},s):null,l.a.createElement(y.a,null,l.a.createElement(y.a.Group,{controlId:"actorForm.name"},l.a.createElement(y.a.Label,null,"Actor Name"),l.a.createElement(y.a.Control,{type:"text",value:g,placeholder:"Enter Actor Name",onChange:function(e){return b(e.target.value)}})),l.a.createElement(y.a.Group,{controlId:"actorForm.age"},l.a.createElement(y.a.Label,null,"Age"),l.a.createElement(y.a.Control,{type:"number",value:j||0,placeholder:"Enter Actor Age",onChange:function(e){return C(+e.target.value)}})),l.a.createElement(y.a.Group,{controlId:"exampleForm.gender"},l.a.createElement(y.a.Label,null,"Gender"),l.a.createElement(y.a.Control,{as:"select",value:N,onChange:function(e){return x(e.target.value)},custom:!0},l.a.createElement("option",{value:n.Male},k(n.Male)),l.a.createElement("option",{value:n.Female},k(n.Female)),l.a.createElement("option",{value:n.Unknown},k(n.Unknown)))),l.a.createElement(y.a.Group,{controlId:"actorForm.movies"},l.a.createElement(y.a.Label,null,"Movies"),l.a.createElement(M.a,{isMulti:!0,value:U,onChange:function(e){console.log("selectedOptions=",e),z(e)},options:L})))),l.a.createElement(A.a.Footer,null,l.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),l.a.createElement(v.a,{variant:"primary",onClick:function(){var a={name:g,age:j,gender:N,movies:(U||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return S.patch("".concat("/api/actors","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)})):function(e){return S.post("/api/actors",e)}(a).then((function(){e.onClose()})).catch((function(e){d("Failed to update actor."+e.message)}))}},"Save Changes"))))})),L={visible:!1},B=Object(d.g)((function(e){var t=Object(r.useState)(L),a=Object(m.a)(t,2),n=a[0],c=(a[1],Object(r.useState)([])),o=Object(m.a)(c,2),i=o[0],u=o[1],s=Object(r.useState)({visible:!1,isEditing:!1}),d=Object(m.a)(s,2),h=d[0],O=d[1];Object(r.useEffect)((function(){T().then((function(e){u(e.results)}))}),[h.visible]);var j=[[]];i.forEach((function(e){j[j.length-1].length>=3&&j.push([]),j[j.length-1].push(l.a.createElement(w,{key:e.id,data:e,onEdit:function(){return t=e,O(Object(E.a)(Object(E.a)({},h),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return t=e.id,void console.log("Actor Id Deleted",t);var t}},e.name))}));var C=l.a.createElement(g.a,null," No Actors Found "),k=h.visible?l.a.createElement(D,{show:h.visible,isEditing:h.isEditing,onClose:function(){O({visible:!1,isEditing:!1})},data:h.data}):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,null,l.a.createElement(g.a,{md:"auto"},l.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){O(Object(E.a)(Object(E.a)({},h),{},{visible:!0,isEditing:!1}))}},"Add Actor")),l.a.createElement(g.a,null,n.visible?l.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),i.length>0?j.map((function(e,t){return l.a.createElement(f.a,{key:t,className:"mt-3"},e)})):C,k)})),G=a(30),H=a(62),U=a(96),z=a(120),R=a(51),J=function(e){var t=Object(R.b)(),a=(t.user,t.isAuthenticated),n=t.loginWithRedirect,r=t.logout,c=a?l.a.createElement(l.a.Fragment,null,l.a.createElement(G.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),l.a.createElement(G.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")):null,o=a?l.a.createElement(v.a,{onClick:function(){return r({returnTo:window.location.origin,client_id:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m"})},variant:"link"},"Logout"):l.a.createElement(v.a,{onClick:function(){return n()},variant:"link"},"Log In");return l.a.createElement(z.a,null,l.a.createElement(H.a,{bg:"dark",variant:"dark"},l.a.createElement(H.a.Brand,{href:"#home"},"Casting Agency"),l.a.createElement(H.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(H.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(U.a,{className:"mr-auto"},c),l.a.createElement(U.a,null,o))),l.a.createElement("div",{className:"container-fluid pt-4"},e.children))},W=a(92),Z=a.n(W),Q=function(e){var t,a=(e.data.actors||[]).map((function(e){return l.a.createElement(h.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=l.a.createElement("span",{className:[Z.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return l.a.createElement(O.a,{className:Z.a.Movie+" shadow bg-white rounded "},l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),l.a.createElement(O.a.Subtitle,{className:"mb-2 text-muted"},n),l.a.createElement(O.a.Text,null,a)),l.a.createElement(O.a.Footer,null,l.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),l.a.createElement(O.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},K=a(121),X=a.n(K),Y=Object(d.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),c=Object(r.useState)(""),o=Object(m.a)(c,2),i=o[0],u=o[1],s=Object(r.useState)(a),d=Object(m.a)(s,2),E=d[0],f=d[1],g=Object(r.useState)(t&&t.title||""),b=Object(m.a)(g,2),h=b[0],O=b[1],j=Object(r.useState)(n),C=Object(m.a)(j,2),k=C[0],w=C[1],_=Object(r.useState)(n),N=Object(m.a)(_,2),x=N[0],I=N[1];Object(r.useEffect)((function(){T().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));w(t)}))}),[]);return l.a.createElement(A.a,{show:e.show,onHide:e.onClose},l.a.createElement(F.a,{active:e.show},l.a.createElement(A.a.Header,{closeButton:!0},l.a.createElement(A.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),l.a.createElement(A.a.Body,null,i?l.a.createElement(p.a,{variant:"danger"},i):null,l.a.createElement(y.a,null,l.a.createElement(y.a.Group,{controlId:"movieForm.title"},l.a.createElement(y.a.Label,null,"Movie Title"),l.a.createElement(y.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return O(e.target.value)}})),l.a.createElement(y.a.Group,{controlId:"movieForm.release_date"},l.a.createElement(y.a.Label,null,"Movie Title"),l.a.createElement(X.a,{selected:E,onChange:function(e){return f(e)}})),l.a.createElement(y.a.Group,{controlId:"movieForm.actors"},l.a.createElement(y.a.Label,null,"Actors"),l.a.createElement(M.a,{isMulti:!0,value:x,onChange:function(e){console.log("selectedOptions=",e),I(e)},options:k})),l.a.createElement(y.a.Group,{controlId:"movieForm.description"},l.a.createElement(y.a.Label,null,"Description"),l.a.createElement(y.a.Control,{as:"textarea",rows:3})))),l.a.createElement(A.a.Footer,null,l.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),l.a.createElement(v.a,{variant:"primary",onClick:function(){u("");var a={title:h,release_date:Math.round(E.getTime()/1e3),actors:(x||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return S.patch("".concat("/api/movies","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){u("Failed to update movie."+e.message)})):function(e){return S.post("/api/movies",e)}(a).then((function(){e.onClose()})).catch((function(e){u("Failed to update movie."+e.message)}))}},"Save Changes"))))})),$={visible:!1},q=Object(d.g)((function(e){var t=Object(r.useState)($),a=Object(m.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)([]),i=Object(m.a)(o,2),u=i[0],s=i[1],d=Object(r.useState)({visible:!1,isEditing:!1}),h=Object(m.a)(d,2),O=h[0],j=h[1];Object(r.useEffect)((function(){I().then((function(e){s(e.results)}))}),[O.visible]);var C=function(e){var t;(t=e.id,S.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=u.filter((function(t){return t.id!==e.id}));s(t),c({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})})).catch((function(e){c({visible:!0,alertType:"danger",message:e.message})}))},k=[[]];u.forEach((function(e){k[k.length-1].length>=3&&k.push([]),k[k.length-1].push(l.a.createElement(Q,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return C(e)}},e.title))}));var w=l.a.createElement(g.a,null," No Movies Found "),y=O.visible?l.a.createElement(Y,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,null,l.a.createElement(g.a,{md:"auto"},l.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(E.a)(Object(E.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Movie")),l.a.createElement(g.a,null,n.visible?l.a.createElement(p.a,{key:1,variant:n.alertType||"primary"},n.message):null)),u.length>0?k.map((function(e,t){return l.a.createElement(f.a,{key:t,className:"mt-3"},e)})):w,y)})),P=a(124),V=a.n(P),ee=a(125),te=a(95),ae=a.n(te),ne=function(e){return l.a.createElement("div",{className:ae.a.HomeImageContainer},l.a.createElement(ee.a,{className:ae.a.HomeImage,src:V.a,rounded:!0}))};var re=function(){var e=Object(R.b)(),t=(e.user,e.isAuthenticated),a=e.getAccessTokenSilently,n=Object(r.useState)(""),c=Object(m.a)(n,2),o=c[0],i=c[1];Object(r.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,a();case 3:n=e.sent,S.defaults.headers.common.Authorization="Bearer "+n,i(n);case 6:case"end":return e.stop()}}),e)})))()}),[t]);var E=t&&o?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/movies",component:q}),l.a.createElement(d.b,{exact:!0,path:"/actors",component:B}),l.a.createElement(d.a,{to:"/movies"}))):l.a.createElement(ne,null);return l.a.createElement(J,null,E)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(216);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(G.a,{basename:"/"},l.a.createElement(R.a,{domain:"ashishp-dev.us.auth0.com",clientId:"IrrwsvDC9WQZ404zksQ0ALJsbKGZwX4m",audience:"casting-agency-api",redirectUri:window.location.origin},l.a.createElement(re,null)," "))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}},95:function(e,t,a){e.exports={HomeImageContainer:"Home_HomeImageContainer__2GUUy",HomeImage:"Home_HomeImage__2-Nc_"}}},[[126,1,2]]]);
//# sourceMappingURL=main.8ce30cfb.chunk.js.map