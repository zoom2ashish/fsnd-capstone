(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{111:function(e,t,a){e.exports={Actor:"Actor_Actor__M5RvJ",ActionButtons:"Actor_ActionButtons__3CY9E"}},119:function(e,t,a){e.exports=a(208)},124:function(e,t,a){},125:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n,l=a(0),r=a.n(l),c=a(18),o=a.n(c),i=(a(124),a(125),a(14)),u=a(37),s=a(15),m=a(31),d=a(70),E=a(34),v=a(69),f=a(40),b=a(63),g=a(16),p=a(111),h=a.n(p);function O(e){switch(e){case n.Male:return"Male";case n.Female:return"Female";default:return"Unknown"}}!function(e){e.Male="M",e.Female="F",e.Unknown="U"}(n||(n={}));var j=function(e){var t,a=(e.data.movies||[]).map((function(e){return r.a.createElement(b.a,{key:e.id,variant:"info",className:"mr-2"},e.title)}));return r.a.createElement(g.a,{className:h.a.Actor+" shadow bg-white rounded "},r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.name),r.a.createElement(g.a.Text,null,r.a.createElement("span",{className:"mr-2"},"Age"),r.a.createElement("span",null,e.data.age)),r.a.createElement(g.a.Text,null,r.a.createElement("span",{className:"mr-2"},"Gender"),r.a.createElement("span",null,O(e.data.gender))),r.a.createElement(g.a.Text,null,a)),r.a.createElement(g.a.Footer,null,r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},C=(a(94),a(10)),k=a(23),w=a(65),y=a.n(w),A=a(75),F=a(112),M=a.n(F).a.create({headers:{Authrization:"xxxxxx"}});M.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)throw e}));var N=M;function _(){return N.get("/api/movies").then((function(e){return e.data}))}function S(){return N.get("/api/actors").then((function(e){return e.data}))}var x=Object(i.g)((function(e){var t=e.data||null,a=t&&t.age||0,c=t&&t.gender||n.Unknown,o=(t&&t.movies||[]).map((function(e){return{value:e.id,label:e.title}})),i=Object(l.useState)(""),u=Object(s.a)(i,2),d=u[0],E=u[1],v=Object(l.useState)(t&&t.name||""),b=Object(s.a)(v,2),g=b[0],p=b[1],h=Object(l.useState)(a),j=Object(s.a)(h,2),w=j[0],F=j[1],M=Object(l.useState)(c),S=Object(s.a)(M,2),x=S[0],D=S[1],T=Object(l.useState)(o),B=Object(s.a)(T,2),L=B[0],G=B[1],I=Object(l.useState)(o),U=Object(s.a)(I,2),R=U[0],H=U[1];Object(l.useEffect)((function(){_().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.title}}));G(t)}))}),[]);return r.a.createElement(k.a,{show:e.show,onHide:e.onClose},r.a.createElement(y.a,{active:e.show},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,e.isEditing?"Edit Actor":"Add Actor")),r.a.createElement(k.a.Body,null,d?r.a.createElement(f.a,{variant:"danger"},d):null,r.a.createElement(C.a,null,r.a.createElement(C.a.Group,{controlId:"actorForm.name"},r.a.createElement(C.a.Label,null,"Actor Name"),r.a.createElement(C.a.Control,{type:"text",value:g,placeholder:"Enter Actor Name",onChange:function(e){return p(e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"actorForm.age"},r.a.createElement(C.a.Label,null,"Age"),r.a.createElement(C.a.Control,{type:"number",value:w||0,placeholder:"Enter Actor Age",onChange:function(e){return F(+e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"exampleForm.gender"},r.a.createElement(C.a.Label,null,"Gender"),r.a.createElement(C.a.Control,{as:"select",value:x,onChange:function(e){return D(e.target.value)},custom:!0},r.a.createElement("option",{value:n.Male},O(n.Male)),r.a.createElement("option",{value:n.Female},O(n.Female)),r.a.createElement("option",{value:n.Unknown},O(n.Unknown)))),r.a.createElement(C.a.Group,{controlId:"actorForm.movies"},r.a.createElement(C.a.Label,null,"Movies"),r.a.createElement(A.a,{isMulti:!0,value:R,onChange:function(e){console.log("selectedOptions=",e),H(e)},options:L})))),r.a.createElement(k.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:e.onClose},"Close"),r.a.createElement(m.a,{variant:"primary",onClick:function(){var a={name:g,age:w,gender:x,movies:(R||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return N.patch("".concat("/api/actors","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){E("Failed to update actor."+e.message)})):function(e){return N.post("/api/actors",e)}(a).then((function(){e.onClose()})).catch((function(e){E("Failed to update actor."+e.message)}))}},"Save Changes"))))})),D={visible:!1},T=Object(i.g)((function(e){var t=Object(l.useState)(D),a=Object(s.a)(t,2),n=a[0],c=(a[1],Object(l.useState)([])),o=Object(s.a)(c,2),i=o[0],b=o[1],g=Object(l.useState)({visible:!1,isEditing:!1}),p=Object(s.a)(g,2),h=p[0],O=p[1];Object(l.useEffect)((function(){S().then((function(e){b(e.results)}))}),[h.visible]);var C=[[]];i.forEach((function(e){C[C.length-1].length>=3&&C.push([]),C[C.length-1].push(r.a.createElement(j,{key:e.id,data:e,onEdit:function(){return t=e,O(Object(u.a)(Object(u.a)({},h),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return t=e.id,void console.log("Actor Id Deleted",t);var t}},e.name))}));var k=r.a.createElement(E.a,null," No Actors Found "),w=h.visible?r.a.createElement(x,{show:h.visible,isEditing:h.isEditing,onClose:function(){O({visible:!1,isEditing:!1})},data:h.data}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{md:"auto"},r.a.createElement(m.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){O(Object(u.a)(Object(u.a)({},h),{},{visible:!0,isEditing:!1}))}},"Add Actor")),r.a.createElement(E.a,null,n.visible?r.a.createElement(f.a,{key:1,variant:n.alertType||"primary"},n.message):null)),i.length>0?C.map((function(e,t){return r.a.createElement(d.a,{key:t,className:"mt-3"},e)})):k,w)})),B=a(29),L=a(61),G=a(118),I=a(114),U=function(e){return r.a.createElement(I.a,null,r.a.createElement(L.a,{bg:"dark",variant:"dark"},r.a.createElement(L.a.Brand,{href:"#home"},"Casting Agency"),r.a.createElement(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(L.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(G.a,{className:"mr-auto"},r.a.createElement(B.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),r.a.createElement(B.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")))),r.a.createElement("div",{className:"container-fluid pt-4"},e.children))},R=a(90),H=a.n(R),z=function(e){var t,a=(e.data.actors||[]).map((function(e){return r.a.createElement(b.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=r.a.createElement("span",{className:[H.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return r.a.createElement(g.a,{className:H.a.Movie+" shadow bg-white rounded "},r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),r.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted"},n),r.a.createElement(g.a.Text,null,a)),r.a.createElement(g.a.Footer,null,r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),r.a.createElement(g.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},J=a(115),W=a.n(J),Y=Object(i.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,n=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),c=Object(l.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],d=Object(l.useState)(a),E=Object(s.a)(d,2),v=E[0],b=E[1],g=Object(l.useState)(t&&t.title||""),p=Object(s.a)(g,2),h=p[0],O=p[1],j=Object(l.useState)(n),w=Object(s.a)(j,2),F=w[0],M=w[1],_=Object(l.useState)(n),x=Object(s.a)(_,2),D=x[0],T=x[1];Object(l.useEffect)((function(){S().then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));M(t)}))}),[]);return r.a.createElement(k.a,{show:e.show,onHide:e.onClose},r.a.createElement(y.a,{active:e.show},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),r.a.createElement(k.a.Body,null,i?r.a.createElement(f.a,{variant:"danger"},i):null,r.a.createElement(C.a,null,r.a.createElement(C.a.Group,{controlId:"movieForm.title"},r.a.createElement(C.a.Label,null,"Movie Title"),r.a.createElement(C.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return O(e.target.value)}})),r.a.createElement(C.a.Group,{controlId:"movieForm.release_date"},r.a.createElement(C.a.Label,null,"Movie Title"),r.a.createElement(W.a,{selected:v,onChange:function(e){return b(e)}})),r.a.createElement(C.a.Group,{controlId:"movieForm.actors"},r.a.createElement(C.a.Label,null,"Actors"),r.a.createElement(A.a,{isMulti:!0,value:D,onChange:function(e){console.log("selectedOptions=",e),T(e)},options:F})),r.a.createElement(C.a.Group,{controlId:"movieForm.description"},r.a.createElement(C.a.Label,null,"Description"),r.a.createElement(C.a.Control,{as:"textarea",rows:3})))),r.a.createElement(k.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:e.onClose},"Close"),r.a.createElement(m.a,{variant:"primary",onClick:function(){u("");var a={title:h,release_date:Math.round(v.getTime()/1e3),actors:(D||[]).map((function(e){return e.value}))},n=(null===t||void 0===t?void 0:t.id)||0;e.isEditing?function(e,t){return N.patch("".concat("/api/movies","/").concat(e),t)}(n,a).then((function(){e.onClose()})).catch((function(e){u("Failed to update movie."+e.message)})):function(e){return N.post("/api/movies",e)}(a).then((function(){e.onClose()})).catch((function(e){u("Failed to update movie."+e.message)}))}},"Save Changes"))))})),Z={visible:!1},$=Object(i.g)((function(e){var t=Object(l.useState)(Z),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)([]),i=Object(s.a)(o,2),b=i[0],g=i[1],p=Object(l.useState)({visible:!1,isEditing:!1}),h=Object(s.a)(p,2),O=h[0],j=h[1];Object(l.useEffect)((function(){_().then((function(e){g(e.results)}))}),[O.visible]);var C=function(e){var t;(t=e.id,N.delete("/api/movies"+"/".concat(t)).then((function(e){return e}))).then((function(){var t=b.filter((function(t){return t.id!==e.id}));g(t),c({visible:!0,message:"Movie '".concat(e.title,"' deleted successfully"),alertType:"success"})}))},k=[[]];b.forEach((function(e){k[k.length-1].length>=3&&k.push([]),k[k.length-1].push(r.a.createElement(z,{key:e.id,data:e,onEdit:function(){return t=e,j(Object(u.a)(Object(u.a)({},O),{},{visible:!0,isEditing:!0,data:t}));var t},onDelete:function(){return C(e)}},e.title))}));var w=r.a.createElement(E.a,null," No Movies Found "),y=O.visible?r.a.createElement(Y,{show:O.visible,isEditing:O.isEditing,onClose:function(){j({visible:!1,isEditing:!1})},data:O.data}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{md:"auto"},r.a.createElement(m.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){j(Object(u.a)(Object(u.a)({},O),{},{visible:!0,isEditing:!1}))}},"Add Movie")),r.a.createElement(E.a,null,n.visible?r.a.createElement(f.a,{key:1,variant:n.alertType||"primary"},n.message):null)),b.length>0?k.map((function(e,t){return r.a.createElement(d.a,{key:t,className:"mt-3"},e)})):w,y)}));var q=function(){var e=r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/movies",component:$}),r.a.createElement(i.b,{exact:!0,path:"/actors",component:T}),r.a.createElement(i.a,{to:"/movies"}));return r.a.createElement(U,null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(207);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B.a,{basename:"/"},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}}},[[119,1,2]]]);
//# sourceMappingURL=main.b2244734.chunk.js.map