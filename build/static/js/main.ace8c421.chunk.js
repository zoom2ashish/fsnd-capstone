(this["webpackJsonpcasting-agency-app"]=this["webpackJsonpcasting-agency-app"]||[]).push([[0],{115:function(e,t,a){e.exports=a(205)},120:function(e,t,a){},121:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=(a(120),a(121),a(12)),i=a(27),s=a(21),u=a(103),m=a(41),v=a(38),d=a(80),E=a.n(d),f=function(e){var t,a,n=[E.a.Actor,"mb-4"].join(" ");return r.a.createElement(s.a,{className:n},r.a.createElement(s.a.Body,null,r.a.createElement(u.a,null,r.a.createElement(m.a,{sm:8},r.a.createElement("h4",null,null===(t=e.data)||void 0===t?void 0:t.name),r.a.createElement("h6",null,"Age: ",null===(a=e.data)||void 0===a?void 0:a.age," yrs")),r.a.createElement(m.a,{sm:4,className:"justify-content-end"},r.a.createElement("div",{className:E.a.ActionButtons},r.a.createElement(v.a,{variant:"primary",className:"ml-1"},"Edit"),r.a.createElement(v.a,{variant:"danger",className:"ml-1"},"Delete"))))))},b=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){fetch("/api/actors").then((function(e){return e.json()})).then((function(e){o(e.results)}))}),[]);var c=l.map((function(e){return r.a.createElement(f,{key:e.id,data:e})}));return r.a.createElement(r.a.Fragment,null,c)},h=a(35),g=a(56),p=a(114),j=a(104),O=function(e){return r.a.createElement(j.a,null,r.a.createElement(g.a,{bg:"dark",variant:"dark"},r.a.createElement(g.a.Brand,{href:"#home"},"Casting Agency"),r.a.createElement(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(g.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(h.b,{to:"/movies",className:"nav-link",activeClassName:"active"},"Movies"),r.a.createElement(h.b,{to:"/actors",className:"nav-link",activeClassName:"active"},"Actors")))),r.a.createElement("div",{className:"container-fluid pt-4"},e.children))},_=a(57),N=a(112),C=a(106),y=a(83),M=a.n(y),k=function(e){var t,a=(e.data.actors||[]).map((function(e){return r.a.createElement(C.a,{key:e.id,variant:"info",className:"mr-2"},e.name)})),n=r.a.createElement("span",{className:[M.a.Release_Date,"pt-1"].join(" ")},"Release Date: ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!isNaN(e)&&e>0){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}return"N/A"}(e.data.release_date));return r.a.createElement(s.a,{className:M.a.Movie},r.a.createElement(s.a.Body,null,r.a.createElement(s.a.Title,null,null===(t=e.data)||void 0===t?void 0:t.title),r.a.createElement(s.a.Subtitle,{className:"mb-2 text-muted"},n),r.a.createElement(s.a.Text,null,a)),r.a.createElement(s.a.Footer,null,r.a.createElement(s.a.Link,{href:"#",onClick:function(){return e.onEdit(e.data.id)}},"Edit"),r.a.createElement(s.a.Link,{href:"#",onClick:function(){return e.onDelete(e.data.id)}},"Delete")))},A=a(22),w=a(48),D=a(107),x=a.n(D),S=a(113),B=a(108),F=a.n(B),T=(a(127),Object(c.g)((function(e){var t=e.data||null,a=t&&t.release_date?new Date(1e3*t.release_date):new Date,l=(t&&t.actors||[]).map((function(e){return{value:e.id,label:e.name}})),o=Object(n.useState)(""),c=Object(i.a)(o,2),s=(c[0],c[1]),u=Object(n.useState)(a),m=Object(i.a)(u,2),d=m[0],E=m[1],f=Object(n.useState)(t&&t.title||""),b=Object(i.a)(f,2),h=b[0],g=b[1],p=Object(n.useState)(l),j=Object(i.a)(p,2),O=j[0],_=j[1],N=Object(n.useState)(l),C=Object(i.a)(N,2),y=C[0],M=C[1];Object(n.useEffect)((function(){fetch("/api/actors").then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e){return{value:e.id,label:e.name}}));_(t)}))}),[]);return r.a.createElement(w.a,{show:e.show,onHide:e.onClose},r.a.createElement(x.a,{active:e.show},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,e.isEditing?"Edit Movie":"Add Movie")),r.a.createElement(w.a.Body,null,r.a.createElement(A.a,null,r.a.createElement(A.a.Group,{controlId:"movieForm.title"},r.a.createElement(A.a.Label,null,"Movie Title"),r.a.createElement(A.a.Control,{type:"text",value:h,placeholder:"Enter Movie Title",onChange:function(e){return g(e.target.value)}})),r.a.createElement(A.a.Group,{controlId:"movieForm.release_date"},r.a.createElement(A.a.Label,null,"Movie Title"),r.a.createElement(F.a,{selected:d,onChange:function(e){return E(e)}})),r.a.createElement(A.a.Group,{controlId:"movieForm.actors"},r.a.createElement(A.a.Label,null,"Actors"),r.a.createElement(S.a,{isMulti:!0,value:y,onChange:function(e){console.log("selectedOptions=",e),M(e)},options:O})),r.a.createElement(A.a.Group,{controlId:"movieForm.description"},r.a.createElement(A.a.Label,null,"Description"),r.a.createElement(A.a.Control,{as:"textarea",rows:3})))),r.a.createElement(w.a.Footer,null,r.a.createElement(v.a,{variant:"secondary",onClick:e.onClose},"Close"),r.a.createElement(v.a,{variant:"primary",onClick:function(){var a={title:h,release_date:Math.round(d.getTime()/1e3),actors:(y||[]).map((function(e){return e.value}))},n=e.isEditing?"/api/movies/".concat(null===t||void 0===t?void 0:t.id):"/api/movies";fetch(n,{method:e.isEditing?"PATCH":"POST",body:JSON.stringify(a)}).then((function(){e.onClose()})).catch((function(e){s("Failed to create movie."+e.message)}))}},"Save Changes"))))}))),I=a(111),L=a.n(I).a.create({headers:{Authrization:"xxxxxx"}});L.interceptors.response.use((function(e){return e}),(function(e){e.response.status}));var R=L;var G=Object(c.g)((function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)({visible:!1,isEditing:!1}),s=Object(i.a)(c,2),u=s[0],d=s[1];Object(n.useEffect)((function(){R.get("/api/movies").then((function(e){return e.data})).then((function(e){o(e.results)}))}),[u.visible]);var E=[[]];l.forEach((function(e){E[E.length-1].length>=3&&E.push([]),E[E.length-1].push(r.a.createElement(k,{key:e.id,data:e,onEdit:function(){return t=e,d(Object(_.a)(Object(_.a)({},u),{},{visible:!0,isEditing:!0,movie:t}));var t},onDelete:function(){return t=e.id,void console.log("Movie Id Deleted",t);var t}},e.title))}));var f=r.a.createElement(m.a,null," No Movies Found "),b=u.visible?r.a.createElement(T,{show:u.visible,isEditing:u.isEditing,onClose:function(){d({visible:!1,isEditing:!1})},data:u.movie}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"primary",size:"lg",className:"mb-3",onClick:function(){d(Object(_.a)(Object(_.a)({},u),{},{visible:!0,isEditing:!1}))}},"Add Movie"),l.length>0?E.map((function(e,t){return r.a.createElement(N.a,{key:t,className:"mt-3"},e)})):f,b)}));var H=function(){var e=r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/movies",component:G}),r.a.createElement(c.b,{exact:!0,path:"/actors",component:b}),r.a.createElement(c.a,{to:"/movies"}));return r.a.createElement(O,null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(204);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h.a,{basename:"/"},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports={Movie:"Actor_Movie__3H2ZN",Release_Date:"Actor_Release_Date__36fxu",ActionButtons:"Actor_ActionButtons__3CY9E"}},83:function(e,t,a){e.exports={Movie:"Movie_Movie__32w0m",Release_Date:"Movie_Release_Date__3_Fur",ActionButtons:"Movie_ActionButtons__3ZhgO"}}},[[115,1,2]]]);
//# sourceMappingURL=main.ace8c421.chunk.js.map